const fs = require('fs');
const filePath = 'songs/deep_no_regret.json';

try {
  let rawData = fs.readFileSync(filePath, 'utf-8');
  let data = JSON.parse(rawData);
  let changesMade = 0;

  data.translatedLines.forEach(item => {
    if (item.T0 === "すっぴんだって" && item.K0 === "민낯이어도") {
      item.K0 = "맨얼굴이라도"; // '민낯'도 좋지만, '맨얼굴'이 좀 더 보편적일 수 있음
      changesMade++;
    }
    if (item.T0 === "語ることを嫌って" && item.K0 === "말하는 것을 싫어해서") {
      item.K0 = "얘기하는 걸 싫어해서"; // '말하는 것' -> '얘기하는 걸' (좀 더 구어체)
      changesMade++;
    }
    if (item.T0 === "言葉でくれるの" && item.K0 === "말을 해주는 거야") {
      item.K0 = "말로 해주는걸"; // '거야' -> '걸' (좀 더 부드러운 느낌)
      changesMade++;
    }
    if (item.T0 === "笑っていられる" && item.K0 === "웃을 수 있어") {
      item.K0 = "웃으며 있을 수 있어"; // 좀 더 원문의 느낌을 살림
      changesMade++;
    }
    if (item.T0 === "言わないから" && item.K0 === "말하니까") {
      item.K0 = "말하지 않으니까"; // 사용자 제안 반영
      changesMade++;
    }
    if (item.T0 === "あなたも早くなってね" && item.K0 === "너도 빨리 새로운 사람 만나") {
      // 이 라인의 번역은 적절하므로 변경 없음
    }
    if (item.T0 === "だからもう会いたいや" && item.K0 === "그래서 이젠 만나고 싶어") {
      // 이전 단계에서 수정 완료, 변경 없음
    }
    if (item.T0 === "だからもう会いたいな" && item.K0 === "그러니까 벌써 만나고 싶어.") {
      item.K0 = "그러니까 이젠 만나고 싶네"; // '벌써' -> '이젠', '싶어' -> '싶네' (어투 변경)
      changesMade++;
    }
    // "ごめんね: 미안해"는 적절하므로 유지
    if (item.T0 === "あなたの時みたいに" && item.K0 === "당신의 때처럼") {
      item.K0 = "너와 함께일 때처럼"; // '당신의 때' -> '너와 함께일 때' (의미 명확화)
      changesMade++;
    }
    if (item.T0 === "だけど私はズルいから" && item.K0 === "하지만 난 치사하니까") {
      // 이전 단계에서 수정 완료, 변경 없음
    }
    if (item.T0 === "見つめていて" && item.K0 === "똑바로 마주하고 있으니") {
      // 이전 단계에서 수정 완료, 변경 없음
    }
    if (item.T0 === "終わらせたりせずに" && item.K0 === "끝내버리지 않고") {
      item.K0 = "끝내버리지 않고"; // 좀 더 강조된 느낌
      changesMade++;
    }
    if (item.T0 === "ずっとさらけ出せず" && item.K0 === "전부 다 보여주지 못하고") {
      item.K0 = "전부 다 보여주지 못하고"; // '드러내다'를 좀 더 구체적으로
      changesMade++;
    }
    // "大きな声で: 큰 소리로"는 적절
    if (item.T0 === "おとなしくしてるの" && item.K0 === "얌전하게 있는 거야") {
      item.K0 = "얌전히 지내고 있어"; // 감정을 억누르는 느낌을 살림
      changesMade++;
    }
    // "私ではなくて: 내가 아니라"는 적절
    // "愚痴を言うような: 불평하는 듯한"은 적절
    // "一生懸命お洒落して: 열심히 멋을 내고"는 적절
    if (item.T0 === "叱られてしまうから" && item.K0 === "꾸중을 듣게 되니까") {
      item.K0 = "혼나버리고 마니까"; // '꾸중을 듣게 되니까' -> '혼나버리고 마니까' (좀 더 구어체적이고 강한 느낌)
      changesMade++;
    }
    if (item.T0 === "今度はあなたみたいに" && item.K0 === "이번에는 너처럼") {
      item.K0 = "이번 남친은 너처럼"; // 문맥상 의미 명확화
      changesMade++;
    }
    // "口喧嘩もなくて: 말다툼도 없고"는 적절
    // "どこにもないの: 어디에도 없어"는 적절
    if (item.T0 === "むしろ怒るとこが" && item.K0 === "오히려 화내는 곳이") {
      item.K0 = "오히려 화낼 부분이"; // '곳' -> '부분'
      changesMade++;
    }
    if (item.T0 === "なるべくちゃんとしてるの" && item.K0 === "최대한 제대로 하고 있어.") {
      item.K0 = "웬만하면 잘하려고 해"; // '최대한 제대로 하고 있어' -> '웬만하면 잘하려고 해' (어투 수정)
      changesMade++;
    }
    if (item.T0 === "それをすると少しだけ" && item.K0 === "그것을 하면 조금만") {
      item.K0 = "그렇게 하면 조금은"; // '그것을' -> '그렇게', '조금만' -> '조금은'
      changesMade++;
    }
    // "夢や希望とかを: 꿈이나 희망 같은 걸"은 적절
    if (item.T0 === "キスや態度だけで" && item.K0 === "키스나 행동만으로") {
      // 이전 단계에서 수정 완료, 변경 없음
    }
    if (item.T0 === "別の人のかれしに" && item.K0 === "다른 사람의 남자친구가 되었으니") {
      item.K0 = "다른 사람의 남자친구가 되길"; // 화자의 바람을 나타내는 어투로 수정
      changesMade++;
    }
    if (item.T0 === "だからもう会えないや" && item.K0 === "그래서 이젠 만날 수 없어") {
      item.K0 = "그래서 이젠 만날 수 없어"; // '이제' -> '이젠', 마침표 제거 (다른 라인과 통일성)
      changesMade++;
    }
    if (item.T0 === "怒鳴りあいはおろか" && item.K0 === "싸우는 건 말할 것도 없이") {
      item.K0 = "소리 지르며 싸우기는커녕"; // '싸우는 건 말할 것도 없이' -> '소리 지르며 싸우기는커녕'
      changesMade++;
    }
    if (item.T0 === "余裕があって大人で" && item.K0 === "여유가 있어 어른스럽게") {
      item.K0 = "여유가 있고 어른스러워서"; // 연결을 부드럽게
      changesMade++;
    }
    if (item.T0 === "ちゃんと現実をね" && item.K0 === "확실히 현실을 보지") {
      item.K0 = "현실을 제대로 보고 있거든"; // 독백 및 뒷 문장 연결 고려
      changesMade++;
    }
    // "一緒にフェスで: 함께 페스티벌에서"는 적절
    if (item.T0 === "本当に優しくしてくれるの" && item.K0 === "정말로 다정하게 대해주는 거야") {
      item.K0 = "정말로 다정하게 대해주거든"; // '거야' -> '거든' (어투)
      changesMade++;
    }
    if (item.T0 === "私が電話をしちゃう前に" && item.K0 === "내가 전화해 버리기 전에") {
      item.K0 = "내가 전화 걸어버리기 전에"; // 약간의 뉘앙스 변화
      changesMade++;
    }
    if (item.T0 === "正しいことだけしか" && item.K0 === "옳은 것만") {
      item.K0 = "옳은 말 말고는"; // 사용자 제안 반영
      changesMade++;
    }
    if (item.T0 === "別の人の彼女になったよ" && item.K0 === "다른 사람의 여자친구가 되었어") {
      // 이전 단계에서 수정 완료, 변경 없음
    }
    if (item.T0 === "ずるいね" && item.K0 === "치사하지") {
      // 이전 단계에서 수정 완료, 변경 없음
    }
    if (item.T0 === "大はしゃぎとかは" && item.K0 === "떠들썩하게 놀거나 하지는 않지만") {
      item.K0 = "떠들썩하게 놀거나 하지는"; // 다음 라인과 자연스럽게 연결되도록 수정
      changesMade++;
    }
    if (item.T0 === "私より泣いてる" && item.K0 === "나보다 더 울거나") {
      // 이전 단계에서 수정 완료, 변경 없음
    }
    if (item.T0 === "しないタイプだけど" && item.K0 === "않지만") {
      item.K0 = "않는 그런 사람이지만"; // 의미를 더 명확하게 수정
      changesMade++;
    }
    if (item.T0 === "ことなんてないし" && item.K0 === "그런 경우는 없고") {
      // 이전 단계에서 수정 완료, 변경 없음
    }
    if (item.T0 === "本当に尊敬できる人なの" && item.K0 === "정말로 존경스러운 사람이야") {
      // ... existing code ...
    }
  });

  if (changesMade > 0) {
    fs.writeFileSync(filePath, JSON.stringify(data, null, 2), 'utf-8');
    console.log(`파일 수정 완료: ${filePath} (${changesMade}개 항목 수정됨)`);
  } else {
    console.log("수정된 항목이 없습니다.");
  }

} catch (error) {
  console.error('스크립트 실행 중 오류 발생:', error);
} 