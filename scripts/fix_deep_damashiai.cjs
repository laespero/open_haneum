const fs = require('fs');
const filePath = 'songs/deep_damashiai.json'; // 대상 파일 경로

try {
  let rawData = fs.readFileSync(filePath, 'utf-8');
  let data = JSON.parse(rawData);
  let changesMade = 0;

  data.translatedLines.forEach(item => {
    // 규칙 1: "私を生きてくから" -> "나로서 살아갈 테니까"
    if (item.T0 === "私を生きてくから" && item.K0 === "나를 살아가게 해줘서") {
      item.K0 = "나로서 살아갈 테니까";
      changesMade++;
    }

    // 규칙 2 재수정: T0가 "信じられるものを探す"이고 K0가 "믿을 수 있는 것을 찾다"인 경우 "믿을 수 있는 것을 찾아"로 변경
    if (item.T0 === "信じられるものを探す" && item.K0 === "믿을 수 있는 것을 찾다") {
      item.K0 = "믿을 수 있는 것을 찾아";
      changesMade++;
    }

    // 규칙 3: "騙し愛の闇の中で" -> "속이는 사랑의 어둠 속에서"
    if (item.T0 === "騙し愛の闇の中で" && item.K0 === "속임수의 사랑의 어둠 속에서") {
      item.K0 = "속이는 사랑의 어둠 속에서";
      changesMade++;
    }
    
    // 규칙 4: "騙し愛の嘘の中で" -> "속이는 사랑, 거짓 속에서"
    if (item.T0 === "騙し愛の嘘の中で" && item.K0 === "속임수의 사랑 거짓말 속에서") {
      item.K0 = "속이는 사랑, 거짓 속에서";
      changesMade++;
    }

    // 규칙 5: "一口齧って欲しいだけ" -> "한 입 맛보길 원할 뿐"
    if (item.T0 === "一口齧って欲しいだけ" && item.K0 === "한 입만 깨물어서 원할 뿐") {
      item.K0 = "한 입 맛보길 원할 뿐";
      changesMade++;
    }
    
    // 규칙 6: "夢だけ見ていたね" (K0: "꿈만 꾸고 있었어.") -> "꿈만 꾸고 있었네." (어투 변경)
    if (item.T0 === "夢だけ見ていたね" && item.K0 === "꿈만 꾸고 있었어.") {
        item.K0 = "꿈만 꾸고 있었네.";
        changesMade++;
    }

    // 규칙 7: "悲しそうな顔させてしまうわ" (K0: "슬퍼 보이는 얼굴을 하게 돼.") -> "슬픈 표정 짓게 만들어 버리네." (좀 더 자연스럽게)
    if (item.T0 === "悲しそうな顔させてしまうわ" && item.K0 === "슬퍼 보이는 얼굴을 하게 돼.") {
        item.K0 = "슬픈 표정 짓게 만들어 버리네.";
        changesMade++;
    }
    
    // 규칙 8: "望まない事ばかりだ" (K0: "바라지 않는 일뿐이야.") -> "원치 않는 일들뿐이야."
    if (item.T0 === "望まない事ばかりだ" && item.K0 === "바라지 않는 일뿐이야.") {
        item.K0 = "원치 않는 일들뿐이야.";
        changesMade++;
    }

    // 규칙 9: "自分を守りたいだけじゃないの?" (K0: "자신을 지키고 싶은 것뿐이 아닌가?") -> "나 자신을 지키고 싶은 것뿐이잖아?"
    if (item.T0 === "自分を守りたいだけじゃないの?" && item.K0 === "자신을 지키고 싶은 것뿐이 아닌가?") {
        item.K0 = "나 자신을 지키고 싶은 것뿐이잖아?";
        changesMade++;
    }

    // 규칙 10: "どうして本当を話せないんだろう" (K0: "왜 진실을 말할 수 없을까.") -> "어째서 진실을 말할 수 없는 걸까?"
    if (item.T0 === "どうして本当を話せないんだろう" && item.K0 === "왜 진실을 말할 수 없을까.") {
        item.K0 = "어째서 진실을 말할 수 없는 걸까?";
        changesMade++;
    }

    // 규칙 11: "覚えていられるか" (K0: "기억하고 있을 수 있을까") -> "기억할 수 있을까?"
    if (item.T0 === "覚えていられるか" && item.K0 === "기억하고 있을 수 있을까") {
        item.K0 = "기억할 수 있을까?";
        changesMade++;
    }

    // 규칙 12: "私は知らぬふりをするのでしょう" (K0: "나는 모르는 척하는 거겠지.") -> "나는 모르는 척하겠지."
    if (item.T0 === "私は知らぬふりをするのでしょう" && item.K0 === "나는 모르는 척하는 거겠지.") {
        item.K0 = "나는 모르는 척하겠지.";
        changesMade++;
    }

    // 규칙 13: "手探りでいいよ" (K0: "손으로 더듬어도 괜찮아.") -> "더듬거리며 찾아도 괜찮아."
    if (item.T0 === "手探りでいいよ" && item.K0 === "손으로 더듬어도 괜찮아.") {
        item.K0 = "더듬거리며 찾아도 괜찮아.";
        changesMade++;
    }
    
    // 규칙 14: "真実は零れてく" (K0: "진실은 흘러나와.") -> "진실은 흘러넘쳐."
     if (item.T0 === "真実は零れてく" && item.K0 === "진실은 흘러나와.") {
        item.K0 = "진실은 흘러넘쳐.";
        changesMade++;
    }

    // 규칙 15: "どうして嘘をついてしまったの" (K0: "왜 거짓말을 하게 되었을까?") -> "어째서 거짓말을 해버린 걸까?"
    if (item.T0 === "どうして嘘をついてしまったの" && item.K0 === "왜 거짓말을 하게 되었을까?") {
        item.K0 = "어째서 거짓말을 해버린 걸까?";
        changesMade++;
    }

    // 규칙 16: "あなたはどんな顔するでしょう" (K0: "당신은 어떤 표정을 지을까요?") -> "그대는 어떤 표정을 지을까."
    if (item.T0 === "あなたはどんな顔するでしょう" && item.K0 === "당신은 어떤 표정을 지을까요?") {
        item.K0 = "그대는 어떤 표정을 지을까.";
        changesMade++;
    }

    // 규칙 17: "触れてしまうことが怖くなったの" (K0: "맞닥뜨리는 게 두려워졌어요.") -> "닿는 것이 두려워졌어."
    if (item.T0 === "触れてしまうことが怖くなったの" && item.K0 === "맞닥뜨리는 게 두려워졌어요.") {
        item.K0 = "닿는 것이 두려워졌어.";
        changesMade++;
    }

  });

  if (changesMade > 0) {
    fs.writeFileSync(filePath, JSON.stringify(data, null, 2), 'utf-8');
    console.log(`파일 수정 완료: ${filePath} (${changesMade}개 항목 수정됨)`);
  } else {
    console.log("수정된 항목이 없습니다.");
  }

} catch (error) {
  console.error('스크립트 실행 중 오류 발생:', error);
} 