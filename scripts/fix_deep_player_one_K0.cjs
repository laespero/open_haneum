const fs = require('fs');
const filePath = './songs/deep_player_one.json';

try {
  let rawData = fs.readFileSync(filePath, 'utf-8');
  let data = JSON.parse(rawData);
  let changesMade = 0;

  const translations = {
    "지키는 자세로 역전을 하다": "방어 태세에서 판을 뒤집어",
    "몰려갈수록": "궁지에 몰릴수록",
    "선천적 최고의 달리기 선수": "타고난 톱 랭커",
    "초개인적인 액션": "나만의 특별한 액션",
    "여기가 가장 보여줄 만한 장면이야.": "여기가 바로 하이라이트 장면이지.",
    "아직 이 정도는 아니다고!": "아직 이 정도론 어림없지!",
    "지금 호흡은 고르고 초차원적인 모션": "지금 호흡을 가다듬고, 초차원적인 모션",
    "일으켜라 BAN 광란": "BAN 소동을 일으켜",
    "이 모드에 들어가 버리면": "이 모드에 일단 들어가면",
    "온몸에 가득 차오르는 무한한 힘": "온몸에 끝없이 힘이 차올라",
    "바로 그런 때일수록 가자": "이럴 때일수록 밀어붙이자",
    "넘어설 수 있을 거라고": "분명 넘어설 수 있을 테니",
    "하지만 포기하지 않는 성질은": "하지만 쉽게 포기하지 않는 근성은",
    "진짜 인생 GAME은 지금부터야.": "진짜 인생 게임은 지금부터 시작이야.",
    "여전히 아직 마지막 순간": "여전히 막다른 골목",
    "공세 자세로 버프를 걸어.": "공격 태세로 버프를 걸어.",
    "이길 수 없을 것 같은 버그 같은 적도": "상대하기 벅찬 버그급 적이라도",
    "머리 속이 버그 난 것처럼 가볍다": "머릿속이 버그 걸린 듯 가벼워",
    "지금 눈앞에 선 것이": "지금 눈앞에 닥친 게",
    "절체절명이란 기회 아닌가?": "절체절명의 위기가 오히려 기회 아니겠어?", // 중복 발생 가능성 있음, 스크립트에서 T0 조건 추가 필요
    "이유 없이 솟아나는 Task Task Task": "뜬금없이 솟아나는 Task Task Task",
    "머리로도 힘으로도 이길 수 없을 것 같아.": "머리로도, 힘으로도 당해낼 수 없을 것 같아.",
    "누가 뭐라고 말해도 앞으로 나아가라.": "누가 뭐라든 망설임 없이 나아가.",
    "끝났다고 보여준 후에 중요한 순간": "다 끝난 듯 보여도 지금부터가 진짜 승부처",
    "손가락 끝까지 마치 우주 같아.": "손끝까지 마치 우주와 이어진 듯",
    "이제 감촉은 EZ로, 잔치는 GG겠죠.": "이젠 감 잡았으니 EZ하게, 마무리도 GG로 끝내겠지.",
    "질 것 같아!? 거짓말!? 여기서 끝인 거야!?": "질 것 같다고!? 말도 안 돼!? 여기서 끝이라고!?",
    "용서 없이 울고 울고 Tick Tick Tack...BOOM!!": "가차 없이 터져 나오는 울음 Tick Tick Tack... BOOM!!"
  };

  data.translatedLines.forEach(line => {
    if (line.K0 && translations[line.K0]) {
      // "절체절명이란 기회 아닌가?"의 경우, T0 값을 특정하여 더 정확하게 수정
      if (line.K0 === "절체절명이란 기회 아닌가?") {
        if (line.T0 === "絶対絶命ってチャンスなんじゃないの?" || line.T0 === "絶体絶命ってチャンスなんじゃないの?") {
          line.K0 = translations[line.K0];
          changesMade++;
        }
      } else {
        line.K0 = translations[line.K0];
        changesMade++;
      }
    }
  });

  if (changesMade > 0) {
    fs.writeFileSync(filePath, JSON.stringify(data, null, 2), 'utf-8');
    console.log(`파일 수정 완료: ${filePath} (${changesMade}개 항목 수정됨)`);
  } else {
    console.log("수정된 항목이 없습니다.");
  }

} catch (error) {
  console.error('스크립트 실행 중 오류 발생:', error);
} 